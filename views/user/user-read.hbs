<section class="user-read container-fluid">
  <div class="row">
    <div class="col-12 col-md-5 mx-auto">
      <div class="input-group mb-3">
        <input type="date" class="form-control" id="datechecker" placeholder="Recipient's username"
          aria-label="Recipient's username" aria-describedby="basic-addon2">
        <div class="input-group-append">
          <button class="btn" type="button" onclick="findData()">Find</button>
        </div>
      </div>


      <div class="row">
        <h5 class="mx-auto text-capitalize mt-3 mb-5">YOUR PURCHASES(₹{{finalAmount}}/₹1500)</h5>
      </div>
    </div>
  </div>
  {{#each expenseContent}}
  <div class="card-deck mb-3">
    <div class="card">
      <div class="card-header bg-info text-light">
        <div class="row mx-auto">
          <div class="col-4 mx-auto d-flex justify-content-start dateStamp">
          {{this.datestamp}}
          </div>
          <div class="col-4 mx-auto d-flex justify-content-center font-weight-bold">
            {{this.inputItem}}
          </div>
          <div class="col-4 mx-auto d-flex justify-content-end">
           {{this.timestamp}}
          </div>
        </div>
      </div>

      <div class="card-body">
 
        <p class="card-text"><span class="font-weight-bold">Items: </span>{{this.inputItems}}</p>
        <p class="card-text"><span class="font-weight-bold">Amount: </span>₹{{this.inputAmount}}</p>
        <p class="card-text"><span class="font-weight-bold">Remarks: </span>{{this.inputRemarks}}</p>
    
      </div>
      <div class="card-footer bg-info text-light font-weight-bold">
        {{this.username}}
      </div>
    </div>
  </div>
  <script>


    var mark = document.getElementsByClassName('markDown')[parseInt(`{{@index}}`)];
    var str = `{{this.markdown}}`;
    String.prototype.allReplace = function (obj) {
      var retStr = this;
      for (var x in obj) {
        retStr = retStr.replace(new RegExp(x, 'g'), obj[x]);
      }
      return retStr;
    };

    mark.innerHTML = str.allReplace({ '&lt;': '<', '&gt;': '>' });



    function findData() {
      var datepreStamp = document.querySelectorAll('.dateStamp');
      console.log(datepreStamp);
      var dateChecker = document.getElementById('datechecker').value.toString();
      var dateCheckerInner = dateChecker.split('-');
      var dateCheckerDay = parseInt(dateCheckerInner[2]);
      var dateCheckerMonth = parseInt(dateCheckerInner[1]);
      var dateCheckerYear = parseInt(dateCheckerInner[0]);
      for (let i = 0; i < datepreStamp.length; i++) {
        var dateStampBody=document.getElementsByClassName('dateStamp')[i];
        var dateStamp = document.getElementsByClassName('dateStamp')[i].innerHTML.toString().trim();
        var dateStampInner = dateStamp.split('/');
        var dateStampDay = parseInt(dateStampInner[1]);
        var dateStampMonth = parseInt(dateStampInner[0]);
        var dateStampYear = parseInt(dateStampInner[2]);
        if(dateCheckerDay===dateStampDay && dateCheckerMonth===dateStampMonth && dateCheckerYear===dateStampYear){
          console.log("all are same")
          dateStampBody.parentElement.parentElement.parentElement.parentElement.style.display='block';
        }else{
          console.log("all are different");
          dateStampBody.parentElement.parentElement.parentElement.parentElement.style.display='none';

        }
      }



    }

  </script>
  {{/each}}


</section>